{"remainingRequest":"/Users/admin/projects/cybercrowdcoin/cybercrowdcoin-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/admin/projects/cybercrowdcoin/cybercrowdcoin-web/src/views/PersonalCenter/EmployerDemand/DemandNew.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/admin/projects/cybercrowdcoin/cybercrowdcoin-web/src/views/PersonalCenter/EmployerDemand/DemandNew.vue","mtime":1702868945000},{"path":"/Users/admin/projects/cybercrowdcoin/cybercrowdcoin-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/projects/cybercrowdcoin/cybercrowdcoin-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IENhdGVnb3J5RGF0YSB9IGZyb20gIkAvZGF0YS9jYXRlZ29yeS5qcyI7CmltcG9ydCB7IGFwcHJvdmUsIGNyZWF0ZURlbWFuZENvbnRyYWN0IH0gZnJvbSAiQC9zZXJ2aWNlL2RlbWFuZF9zZXJ2aWNlIjsKCmltcG9ydCB7IHJlcVVybCB9IGZyb20gIkAvYXBpL2FwaVVybCI7CmltcG9ydCB7IHJlcXVlc3QgfSBmcm9tICJAL2FwaS9yZXF1ZXN0IjsKaW1wb3J0IHsgc2hvd0xvYWRpbmcsIGhpZGVMb2FkaW5nIH0gZnJvbSAiQC91dGlsL2xvYWRpbmciOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBydWxlRm9ybTogewogICAgICAgIHRpdGxlOiAiIiwKICAgICAgICBjYXRlZ29yeTogIiIsCiAgICAgICAgb3B0aW9uc0NhdGVnb3J5OiBbXSwKICAgICAgICB0d2l0dGVyOiAiIiwKICAgICAgICB0ZWxlZ3JhbTogIiIsCiAgICAgICAgdG9rZW5BbW91bnQ6IDEwLAogICAgICAgIGJ1ZGdldDogMCwKICAgICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgdGl0bGU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICJQbGVhc2UgZW50ZXIgVGl0bGUiLCB0cmlnZ2VyOiAiYmx1ciIgfSwKICAgICAgICBdLAogICAgICAgIGNhdGVnb3J5OiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAiU2VsZWN0IGEgY2F0ZWdvcnkiLCB0cmlnZ2VyOiAiYmx1ciIgfSwKICAgICAgICBdLAogICAgICAgIHR3aXR0ZXI6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICJQbGVhc2UgZW50ZXIgdHdpdHRlciIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgIF0sCiAgICAgICAgdGVsZWdyYW06IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICJQbGVhc2UgZW50ZXIgdGVsZWdyYW0iLCB0cmlnZ2VyOiAiYmx1ciIgfSwKICAgICAgICBdLAogICAgICAgIGJ1ZGdldDogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIlBsZWFzZSBlbnRlciB0aGUgZGVtYW5kIGJ1ZGdldCIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBkZXNjcmlwdGlvbjogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIlBsZWFzZSBlbnRlciBEZXNjcmlwdGlvbiIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5ydWxlRm9ybS5vcHRpb25zQ2F0ZWdvcnkgPSBDYXRlZ29yeURhdGE7CiAgfSwKCiAgbWV0aG9kczogewogICAgc3VibWl0Rm9ybShmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuJGNvbmZpcm0oCiAgICAgICAgICAgICJQbGVhc2UgY29uZmlybSB0aGF0IHRoZSBpbmZvcm1hdGlvbiBpcyBjb3JyZWN0LCBhbmQgdGhlbiBjb250aW51ZSIsCiAgICAgICAgICAgICJUaXBzIiwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiQ29uZmlybSIsCiAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIkNhbmNlbCIsCiAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICB9CiAgICAgICAgICApCiAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICBzaG93TG9hZGluZygpOwogICAgICAgICAgICAgIGNvbnN0IG9wdCA9IHsKICAgICAgICAgICAgICAgIHVybDogcmVxVXJsLmFkZGlwZnNEZW1hbmQsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5ydWxlRm9ybS50aXRsZSwKICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ydWxlRm9ybS5jYXRlZ29yeVt0aGlzLnJ1bGVGb3JtLmNhdGVnb3J5Lmxlbmd0aCAtIDFdLAogICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5ydWxlRm9ybS5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgdHdpdHRlcjogdGhpcy5ydWxlRm9ybS50d2l0dGVyLAogICAgICAgICAgICAgICAgICB0ZWxlZ3JhbTogdGhpcy5ydWxlRm9ybS50ZWxlZ3JhbSwKICAgICAgICAgICAgICAgICAgYnVkZ2V0OiB0aGlzLnJ1bGVGb3JtLmJ1ZGdldCwKICAgICAgICAgICAgICAgICAgdG9rZW5BbW91bnQ6IHRoaXMucnVsZUZvcm0udG9rZW5BbW91bnQsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVzRnVuYzogYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuZXJybm8gPT0gMCkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpcGZzID0gcmVzLmRhdGEuZGF0YS51cmwgfHwgIiI7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoaXBmcykgewogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHByb3ZlKHRoaXMucnVsZUZvcm0udG9rZW5BbW91bnQpOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YVJ1bGVGb3JtT2JqID0gewogICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnJ1bGVGb3JtLnRpdGxlLAogICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ydWxlRm9ybS5jYXRlZ29yeVsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ydWxlRm9ybS5jYXRlZ29yeS5sZW5ndGggLSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLnJ1bGVGb3JtLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgIHR3aXR0ZXI6IHRoaXMucnVsZUZvcm0udHdpdHRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICB0ZWxlZ3JhbTogdGhpcy5ydWxlRm9ybS50ZWxlZ3JhbSwKICAgICAgICAgICAgICAgICAgICAgICAgICBidWRnZXQ6IHRoaXMucnVsZUZvcm0uYnVkZ2V0LAogICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuQW1vdW50OiB0aGlzLnJ1bGVGb3JtLnRva2VuQW1vdW50LAogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YU9iaiA9IHsgLi4uZGF0YVJ1bGVGb3JtT2JqLCBpcGZzVXJsOiBpcGZzIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc0hhc2ggPSBhd2FpdCBjcmVhdGVEZW1hbmRDb250cmFjdChkYXRhT2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKAogICAgICAgICAgICAgICAgICAgICAgICAgICJDcmVhdGVkIHN1Y2Nlc3NmdWxseSBhbmQgZ29lcyB0byBEZW1hbmQgTGlzdCBQYWdlISIKICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9QZXJzb25hbENlbnRlci9EZW1hbmRMaXN0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyYW5zSGFzaCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHt9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmVycm5vICE9IDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3IoewogICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXMuZGF0YS5tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBlcnJGdW5jOiAoZXJyKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLCAiZXJyMSIpOwogICAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHJlcXVlc3Qob3B0KTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJDYW5jZWxsZWQgb3BlcmF0aW9uIiwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciBzdWJtaXQhISIpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVzZXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["DemandNew.vue"],"names":[],"mappings":";AA6FA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DemandNew.vue","sourceRoot":"src/views/PersonalCenter/EmployerDemand","sourcesContent":["<template>\n  <div class=\"demand_new_list\">\n    <el-form\n      :model=\"ruleForm\"\n      :rules=\"rules\"\n      ref=\"ruleForm\"\n      class=\"demo-ruleForm\"\n    >\n      <el-form-item prop=\"title\">\n        <span slot=\"label\">\n          <i class=\"iconfont icon-a-titleoptimization\"></i>\n          Title</span\n        >\n        <el-input\n          v-model=\"ruleForm.title\"\n          placeholder=\"Please enter Title\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item prop=\"category\">\n        <span slot=\"label\"> <i class=\"iconfont icon-leibie\"></i> Category</span>\n        <el-cascader\n          v-model=\"ruleForm.category\"\n          :options=\"ruleForm.optionsCategory\"\n          placeholder=\"Select a category\"\n        ></el-cascader>\n      </el-form-item>\n      <el-form-item prop=\"twitter\">\n        <span slot=\"label\">\n          <i class=\"iconfont icon-birdxiaoniao bird_icon\"></i>\n          Twitter</span\n        >\n        <div class=\"demand_new_input_twitter\">\n          https://twitter.com/\n          <el-input\n            v-model=\"ruleForm.twitter\"\n            placeholder=\"Please enter Twitter\"\n          ></el-input>\n        </div>\n      </el-form-item>\n      <el-form-item prop=\"telegram\">\n        <span slot=\"label\">\n          <i class=\"iconfont icon-telegram-plane bird_icon\"></i>\n          Telegram</span\n        >\n        <div class=\"demand_new_input_twitter\">\n          https://t.me/\n          <el-input\n            v-model=\"ruleForm.telegram\"\n            placeholder=\"Please enter Telegram\"\n          ></el-input>\n        </div>\n      </el-form-item>\n      <el-form-item>\n        <span slot=\"label\">\n          <i class=\"iconfont icon-cunkuan\"></i> Token Deposit</span\n        >\n        <el-input-number\n          v-model=\"ruleForm.tokenAmount\"\n          :min=\"0\"\n        ></el-input-number>\n      </el-form-item>\n      <el-form-item prop=\"budget\">\n        <span slot=\"label\">\n          <i class=\"iconfont icon-jiagebaohu\"></i>\n          Demand Budget</span\n        >\n        <el-input-number v-model=\"ruleForm.budget\" :min=\"0\"></el-input-number>\n      </el-form-item>\n      <el-form-item prop=\"description\">\n        <span slot=\"label\">\n          <i class=\"iconfont icon-describe\"></i> Description</span\n        >\n        <el-input\n          type=\"textarea\"\n          v-model=\"ruleForm.description\"\n          placeholder=\"Please enter Description\"\n        ></el-input>\n      </el-form-item>\n      <div class=\"ruleForm_footer\">\n        <el-form-item>\n          <el-button type=\"info\" @click=\"submitForm('ruleForm')\"\n            >Submit</el-button\n          >\n          <el-button @click=\"resetForm('ruleForm')\" type=\"success\"\n            >Empty</el-button\n          >\n        </el-form-item>\n      </div>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { CategoryData } from \"@/data/category.js\";\nimport { approve, createDemandContract } from \"@/service/demand_service\";\n\nimport { reqUrl } from \"@/api/apiUrl\";\nimport { request } from \"@/api/request\";\nimport { showLoading, hideLoading } from \"@/util/loading\";\n\nexport default {\n  data() {\n    return {\n      ruleForm: {\n        title: \"\",\n        category: \"\",\n        optionsCategory: [],\n        twitter: \"\",\n        telegram: \"\",\n        tokenAmount: 10,\n        budget: 0,\n        description: \"\",\n      },\n      rules: {\n        title: [\n          { required: true, message: \"Please enter Title\", trigger: \"blur\" },\n        ],\n        category: [\n          { required: true, message: \"Select a category\", trigger: \"blur\" },\n        ],\n        twitter: [\n          { required: true, message: \"Please enter twitter\", trigger: \"blur\" },\n        ],\n        telegram: [\n          { required: true, message: \"Please enter telegram\", trigger: \"blur\" },\n        ],\n        budget: [\n          {\n            required: true,\n            message: \"Please enter the demand budget\",\n            trigger: \"blur\",\n          },\n        ],\n        description: [\n          {\n            required: true,\n            message: \"Please enter Description\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  mounted() {\n    this.ruleForm.optionsCategory = CategoryData;\n  },\n\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.$confirm(\n            \"Please confirm that the information is correct, and then continue\",\n            \"Tips\",\n            {\n              confirmButtonText: \"Confirm\",\n              cancelButtonText: \"Cancel\",\n              type: \"warning\",\n            }\n          )\n            .then(() => {\n              showLoading();\n              const opt = {\n                url: reqUrl.addipfsDemand,\n                method: \"POST\",\n                params: {\n                  title: this.ruleForm.title,\n                  category:\n                    this.ruleForm.category[this.ruleForm.category.length - 1],\n                  description: this.ruleForm.description,\n                  twitter: this.ruleForm.twitter,\n                  telegram: this.ruleForm.telegram,\n                  budget: this.ruleForm.budget,\n                  tokenAmount: this.ruleForm.tokenAmount,\n                },\n                resFunc: async (res) => {\n                  if (res.data.errno == 0) {\n                    try {\n                      const ipfs = res.data.data.url || \"\";\n                      if (ipfs) {\n                        await approve(this.ruleForm.tokenAmount);\n                        let dataRuleFormObj = {\n                          title: this.ruleForm.title,\n                          category:\n                            this.ruleForm.category[\n                              this.ruleForm.category.length - 1\n                            ],\n                          description: this.ruleForm.description,\n                          twitter: this.ruleForm.twitter,\n                          telegram: this.ruleForm.telegram,\n                          budget: this.ruleForm.budget,\n                          tokenAmount: this.ruleForm.tokenAmount,\n                        };\n\n                        const dataObj = { ...dataRuleFormObj, ipfsUrl: ipfs };\n                        var transHash = await createDemandContract(dataObj);\n                        this.$message.success(\n                          \"Created successfully and goes to Demand List Page!\"\n                        );\n                        this.$router.push(\"/PersonalCenter/DemandList\");\n                        console.log(transHash);\n                      }\n                    } catch (error) {}\n                  }\n                  if (res.data.errno != 0) {\n                    this.$notify.error({\n                      title: \"error\",\n                      message: res.data.message,\n                    });\n                    hideLoading();\n                  }\n                  hideLoading();\n                },\n                errFunc: (err) => {\n                  this.$notify.error({\n                    title: \"error\",\n                    message: err,\n                  });\n                  console.log(err, \"err1\");\n                  hideLoading();\n                },\n              };\n              request(opt);\n            })\n            .catch(() => {\n              this.$message({\n                type: \"info\",\n                message: \"Cancelled operation\",\n              });\n            });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../index.scss\";\n\n.demand_new_list {\n  width: 70%;\n  margin: 0 auto;\n  height: calc(100vh - 120px);\n  overflow-y: scroll;\n\n  i {\n    font-size: 19px;\n  }\n\n  .demand_new_input_twitter {\n    display: flex;\n    border: 1px solid #dcdfe6;\n    border-radius: 15px;\n    background: #fff;\n    padding-left: 15px;\n\n    /deep/ .el-input__inner {\n      width: 97%;\n      border: none;\n      border-radius: 0px;\n      border-left: 1px #dcdfe6 solid;\n      margin-left: 10px;\n    }\n  }\n}\n</style>\n\n<style>\n@import \"../../../Index.scss\";\n</style>\n"]}]}